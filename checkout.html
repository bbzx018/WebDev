<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Form | CSMJU Souvenir Shop</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="pic/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600;700&family=Playfair+Display:wght@600;700&display=swap"
        rel="stylesheet">
    <style>
        .navbar {
         background-color: #5DB2E8; /* หรือจะใช้ชื่อสี skyblue ก็ได้ */
         padding: 12px 20px;
         color: white;
        }


        .order-form-container {
            max-width: 800px;
            margin: 50px auto;
            background: #fff;
            padding: 25px 30px;
            border-radius: 10px;
            border: 1px solid var(--cloudy);
        }

        .order-form-container h2 {
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin-bottom: 20px;
        }

        form label {
            display: block;
            margin-top: 15px;
            font-weight: 600;
        }

        form input,
        form select,
        form textarea {
            width: 100%;
            padding: 10px;
            margin-top: 6px;
            border: 1px solid var(--cloudy);
            border-radius: 6px;
            font-family: 'Prompt', sans-serif;
        }

        form textarea {
            min-height: 80px;
            resize: vertical;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 8px;
        }

        .btn-submit {
            margin-top: 25px;
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--bermuda);
            color: #fff;
            font-weight: bold;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .btn-submit:hover {
            background: var(--chateau);
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <header class="navbar" color="skyblue">
        <div class="nav-container">
            <img src="pic/logo.png" alt="CSMJU Logo" class="logo">
            <nav class="nav-links" id="navLinks">
                <a href="index.html" data-page="home">Home</a>
                <a href="products.html" data-page="products">Products</a>
                <a href="contact.html" data-page="contact">Contact</a>
                <a href="admin.html" data-page="admin" style="color:#ffbb33">Admin</a>
            </nav>
            <div class="nav-icons">
                <i class="fa fa-search"></i>
                <i class="fa fa-user"></i>
                <i class="fa fa-shopping-cart"></i>
            </div>
        </div>
    </header>

    <!-- Order Form -->
    <section class="order-form-container">
        <h2>แบบฟอร์มสั่งซื้อสินค้า</h2>
        <form id="orderForm" enctype="multipart/form-data">
            <label>ชื่อ-นามสกุล *</label>
            <input type="text" name="fullname" placeholder="ระบุชื่อ-นามสกุล" required>

            <label>ที่อยู่สำหรับจัดส่ง *</label>
            <textarea name="address" placeholder="บ้านเลขที่, ถนน, แขวง/ตำบล, เขต/อำเภอ, จังหวัด, รหัสไปรษณีย์"
                required></textarea>

            <label>เบอร์โทรศัพท์ *</label>
            <input type="tel" name="phone" placeholder="08xxxxxxxx" required pattern="[0-9]{10}">

            <label>รายการสินค้า *</label>
            <textarea name="products" placeholder="ระบุสินค้าที่ต้องการ เช่น เสื้อ M สีดำ 2 ตัว, แก้ว 24oz 1 ใบ"
                required></textarea>

            <label>อัปโหลดสลิปการโอนเงิน *</label>
            <input type="file" name="slip" accept="image/*" required>

            <label>วันที่สั่งซื้อ *</label>
            <input type="date" name="order_date" required>

            <label>การจัดส่ง *</label>
            <div class="radio-group">
                <label><input type="radio" name="delivery" value="จัดส่ง" required> จัดส่ง</label>
                <label><input type="radio" name="delivery" value="รับเอง" required> รับเอง</label>
            </div>

            <label>ช่องทางชำระเงิน *</label>
            <div class="radio-group">
                <label><input type="radio" name="payment" value="โอนผ่านธนาคาร" required> โอนผ่านธนาคาร</label>
                <label><input type="radio" name="payment" value="เก็บเงินปลายทาง" required> เก็บเงินปลายทาง</label>
            </div>

            <button type="submit" class="btn-submit">ยืนยันการสั่งซื้อ</button>
        </form>
    </section>

    <footer>
        <p>© 2025 CSMJU Souvenir Shop | วิทยาการคอมพิวเตอร์ มหาวิทยาลัยแม่โจ้</p>
    </footer>

    <script>
document.getElementById("orderForm").addEventListener("submit", function (e) {
    e.preventDefault();
    const form = e.target;

    // อ่านข้อมูลจากฟอร์ม
    const order = {
        id: "ORD-" + Date.now(),
        fullname: form.fullname.value.trim(),
        address: form.address.value.trim(),
        phone: form.phone.value.trim(),
        products: form.products.value.trim(),
        order_date: form.order_date.value,
        delivery: form.delivery.value,
        payment: form.payment.value
    };

    // ตรวจสอบข้อมูลเบื้องต้น
    if (order.fullname.length < 3 || order.products.length < 5 || order.phone.length !== 10) {
        alert("กรุณากรอกข้อมูลให้ครบถ้วน และเบอร์โทรให้ถูกต้อง");
        return;
    }

    // อ่านไฟล์สลิปเป็น base64
    const file = form.slip.files[0];
    if (!file) {
        alert("กรุณาอัปโหลดสลิปการโอนเงิน");
        return;
    }

    const reader = new FileReader();
    reader.onload = function () {
        order.slip = reader.result;

        // บันทึกลง localStorage
        let orders = JSON.parse(localStorage.getItem("csmju_orders") || "[]");
        orders.push(order);
        localStorage.setItem("csmju_orders", JSON.stringify(orders));

        alert("บันทึกคำสั่งซื้อเรียบร้อยแล้ว! เลขคำสั่งซื้อ: " + order.id);
        form.reset();
    };
    reader.readAsDataURL(file);
});
</script>

</body>

</html>